<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ajax</title>
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>

    <input type="button" onclick="getAjax()" value="请求JSON">
    <div id="jsonBox"></div>

    <script>

      'use strict';

      function getAjax() {
        var request;
        if ( window.XMLHttpRequest ) {
          request = new XMLHttpRequest();
        }
        else {
          request = new ActiveXObject("Microsoft.XMLHTTP");
        }
        request.onreadystatechange = function() {
          if ( request.readyState===4 && request.status===200 ) {
            return success( request.responseText );
          }
          else {
            return fail( request.status );
          }
        }
        request.open("POST", "test.json?t=" + Math.random(), true);
        request.send();
      }

      function success(text) {
          var jsonBox = document.getElementById('jsonBox');
          jsonBox.innerHTML = text;
      }
      
      function fail(code) {
          var jsonBox = document.getElementById('jsonBox');
          jsonBox.innerHTML = 'Error code: ' + code;
      }

    </script>
  </body>
</html>
